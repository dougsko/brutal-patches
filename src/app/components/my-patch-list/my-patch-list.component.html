<div class="patch-list-container row section infinite-scroll">
    <div class="title"><span>My Patches</span></div>

    <div class="patches-grid">
        <mat-card *ngFor="let patch of patches" class="patch-card" routerLink="/patch/{{patch.id}}">
            <mat-card-header>
                <mat-card-title class="patch-title">{{patch.title}}</mat-card-title>
                <mat-card-subtitle class="patch-id">#{{patch.id}}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <div class="patch-meta">
                    <span class="patch-author" *ngIf="patch.username">by {{patch.username}}</span>
                    <span class="patch-date" *ngIf="patch.created_at">{{patch.created_at | date:'shortDate'}}</span>
                </div>
                <p class="patch-description" *ngIf="patch.description">{{patch.description}}</p>
                <div class="patch-tags" *ngIf="patch.tags && patch.tags.length">
                    <mat-chip-set>
                        <mat-chip *ngFor="let tag of patch.tags.slice(0, 3)" class="patch-tag">{{tag}}</mat-chip>
                    </mat-chip-set>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
    
    <div class="loading-container" *ngIf="isLoading">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Loading patches...</p>
    </div>
    
    <div class="end-message" *ngIf="!hasMore && patches.length > 0">
        <p>You've reached the end of your patches!</p>
    </div>
    
    <div class="empty-state" *ngIf="!isLoading && patches.length === 0 && isLoggedIn">
        <p>You haven't created any patches yet.</p>
        <p><a routerLink="/patch/new">Create your first patch!</a></p>
    </div>
    
    <div class="login-required" *ngIf="!isLoggedIn">
        <p>Please log in to view your patches.</p>
        <p><a routerLink="/login">Log in here</a> or <a routerLink="/register">create an account</a></p>
    </div>
</div>